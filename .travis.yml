language: cpp

jobs:
  include:
    - stage: test
      os: linux
      sudo: false
      compiler: gcc
      addons:
        apt:
          packages:
            - libboost-program-options-dev
      install:
        - echo "test stage - cmake build install"
      script:
        - echo "test stage - cmake script"

    - stage: test
      os: linux
      sudo: required
      services:
        - docker
      install:
        - echo "test2 stage - docker build install"
      script:
        - echo "test2 stage - docker script"
        - docker image ls -a
    
    - stage: deploy
      os: linux
      sudo: required
      services:
        - docker
      install: 
        - echo "deploy stage - install"
      script:
        - echo "deploy stage - script"
      deploy:
        provider: script
        script: echo "deploy stage - deploy function only runs on tag"
        on:
          tags: true
          